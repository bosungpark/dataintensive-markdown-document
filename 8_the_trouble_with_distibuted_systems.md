분산 시스템의 골치거리
=

분산 시스템을 다루는 것은 한 컴퓨터에서 실행되는 소프트웨어를 작성하는 일과는 근본적으로 다르다.
엔지니어는 모든 게 잘못되더라도 제 역할을 해내는 시스템을 구축해야 한다.

결함과 부분장애
=
단일 컴퓨터 환경: 전부 동작하거나, 전부 실패하거나 둘 중의 하나.

분산 컴퓨터 환경: 네트워크로 연결된 분산 시스템에서는 시스템의 어떤 부분은 잘 동작하지만 다른 부분은 예측할 수 없는 방식으로 고장나는 것도 무리가 아니다. 이를 부분 장애(partial failure)라고 한다. 부분장애는 비결정적이라서 다루기 어렵다.

분산 시스템이 동작하게 만들려면 부분 장애 가능성을 받아들이고 소프트웨어에 내결함성 메커니즘을 넣어야 한다.
신뢰성 없는 구성 요소를 사용해 신뢰성 있는 시스템을 구축해야 한다.

클라우드 컴퓨팅과 슈퍼 컴퓨팅
=
고성능컴퓨팅: 수천개의 CPU를 가진 슈퍼컴퓨터

클라우드 컴퓨팅: 멀티 테넌트 데이터센터

신뢰성 없는 네트워크
=
책에서 주로 다루는 분산시스템은 비공유 시스템이다. 즉 네트워크로 연결된 다수의 장비이다.
비공유가 시스템 구축하는 유일한 방법은 아니지만, 몇가지 이유로 인터넷 서비스를 구축하는 주된 방법이 되었다.

특별한 하드웨어가 필요하지 않아서 상대적으로 저렴하고, 상품화된 클라우드 서비스를 활용할 수 있으며, 지리적으로 분산된 여러 데이터센터에 중복 배치함으로써 높은 신뢰성을 확보할 수 있다.
각 노드들은 서로 다른 장비의 메모리나 디스크엔 접근할 수 없다. 네트워크가 유일한 통신수단이다.

이런 종류의 네트워크에서 노드는 다른 노드로 메시지(패킷)을 보낼 수 있지만 네트워크는 메시지가 도착할 것인지는 보장하지 않는다.

타임아웃과 기약 없는 지연
=
네트워크에서 패킷 지연의 변동성은 큐 대기 때문인 경우가 많다.
지연 시간에 민감한 애플리케이션은 TCP 대신 UDP를 사용한다. UDP는 흐름 제어를 하지 않고 손실된 패킷을 재전송하지 않으므로 네트워크 지연이 크게 변하게 하는 원인 중 일부를 제거한다. 

신뢰성과 지연 변동성 사이에 트레이드 오프 관계가 있다

데이터센터 네트워크와 인터넷은 패킷을 교환을 사용한다. 순간적으로 몰리는 트래픽에 최적화됐기 때문이다. 순간적으로 몰리는 데이터 전송에 회선을 쓰면 네트워크 용량을 낭비하고 전송이 불필요하게 느려진다. TCP는 가용한 네트워크 용량에 맞춰 데이터 전송률을 동적으로 조절한다.

타임아웃에 올바른 값은 없다. 실험을 통해 결정해야 한다.

믿을 수 없는 시계
=
분산 시스템에서 커뮤니케이션은 시간이 걸린다. 네트워크를 통한 예측할 수 없는 지연시간은 전송 후, 수신까지의 시간을 예측할 수 없게 한다.

게다가, 각각의 장치는 하드웨어에 독립된 시계를 가지고 있고 완벽히 정밀하지는 않다.

last write wins와 같은 전략 사용.

> 시간은 정확하지 않다! 의심하자!

지식, 진실, 그리고 거짓말
=
진실은 다수결로 결정된다. 

비잔틴 장군과 거짓말 문제와 같이 클라이언트 단에서 거짓말이 있다면 복잡해진다. 대부분의 노드는 정직하더라도, 거짓말에 대비하는 것은 필요하다.

